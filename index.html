<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nokia Snake Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #4b7500 0%, #000000 100%);
            color: #d7ff5f;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            text-align: center;
            max-width: 600px;
            background: #5b8a00;
            border: 4px solid #d7ff5f;
            padding: 40px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 0 0 6px #000;
            letter-spacing: 3px;
        }

        .snake-image {
            width: 300px;
            height: 168px;
            margin: 30px auto;
            border: 3px solid #d7ff5f;
            overflow: hidden;
        }

        .snake-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .description {
            font-size: 1.1em;
            line-height: 1.5;
            margin: 30px 0;
            background: rgba(0, 0, 0, 0.25);
            padding: 20px;
            border-left: 4px solid #d7ff5f;
        }

        label,
        select {
            font-size: 1em;
        }

        .play-btn {
            background: #d7ff5f;
            color: #000;
            border: none;
            padding: 15px 30px;
            font-size: 1.3em;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            margin-top: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .play-btn:hover {
            background: #c0f040;
        }

        #gameContainer {
            display: none;
            margin-top: 40px;
            background: #5b8a00;
            border: 4px solid #d7ff5f;
            padding: 20px;
        }

        #gameCanvas {
            border: 2px solid #d7ff5f;
            background: #7fbf00;
            display: block;
            margin: 0 auto;
        }

        .controls {
            margin-top: 10px;
            font-size: 1em;
        }

        .score {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .back-btn {
            background: #ff3b3b;
            color: #FFF;
            border: none;
            padding: 8px 18px;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            margin-top: 15px;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="container" id="mainScreen">
        <h1>SNAKE</h1>
        <div class="snake-image">
            <!-- keep this image file in the same folder as this HTML -->
            <img src="IMG-20251206-WA0051.jpg" alt="Classic Nokia Snake splash">
        </div>
        <div class="description">
            Relive the classic Nokia Snake experience on a retro green screen.<br>
            Choose a level, pick a speed, and try not to crash.
        </div>

        <label for="levelSelect">Select Level: </label>
        <select id="levelSelect">
            <option value="classic">Classic (walls kill)</option>
            <option value="teleport">Teleport (wrap at edges)</option>
            <option value="reverse">Reverse controls</option>
            <option value="fast">Fast (extra speed)</option>
            <option value="walls">Walls (internal obstacles)</option>
        </select>

        <br><br>

        <label for="speedSelect">Select Speed: </label>
        <select id="speedSelect">
            <option value="easy">Easy</option>
            <option value="medium" selected>Medium</option>
            <option value="impossible">Impossible</option>
        </select>

        <br><br>
        <button class="play-btn" id="playButton">Click here to play the game</button>
    </div>

    <div id="gameContainer">
        <div class="score">Score: <span id="score">0</span></div>
        <canvas id="gameCanvas" width="400" height="400"></canvas>
        <div class="controls">
            Use ↑ ↓ ← → arrow keys. Press Space to restart.
        </div>
        <button class="back-btn" id="backButton">Back to Menu</button>
    </div>

    <script>
        // ====== GAME STATE ======
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');

        const gridSize = 20;
        const tileCount = canvas.width / gridSize;

        let snake = [{ x: 10, y: 10 }];
        let food = {};
        let dx = 1;
        let dy = 0;
        let score = 0;
        let gameRunning = false;
        let levelType = 'classic';
        let gameSpeed = 150;
        let gameLoopId = null;

        // simple obstacles for "walls" level[web:29]
        const wallsLayout = [
            { x: 5, y: 5 }, { x: 6, y: 5 }, { x: 7, y: 5 },
            { x: 12, y: 10 }, { x: 13, y: 10 }, { x: 14, y: 10 },
            { x: 8, y: 15 }, { x: 9, y: 15 }, { x: 10, y: 15 }
        ];

        // ====== SETUP BUTTON HANDLERS (NO INLINE ONCLICK) ======
        document.getElementById('playButton').addEventListener('click', startGame);  // avoids inline-bug issues[web:93][web:87]
        document.getElementById('backButton').addEventListener('click', backToMenu);

        // ====== GAME FUNCTIONS ======
        function randomFood() {
            let valid = false;
            while (!valid) {
                const fx = Math.floor(Math.random() * tileCount);
                const fy = Math.floor(Math.random() * tileCount);
                valid =
                    !snake.some(s => s.x === fx && s.y === fy) &&
                    !wallsLayout.some(w => w.x === fx && w.y === fy);
                if (valid) food = { x: fx, y: fy };
            }
        }

        function drawWalls() {
            if (levelType !== 'walls') return;
            ctx.fillStyle = '#406000';
            wallsLayout.forEach(w => {
                ctx.fillRect(w.x * gridSize, w.y * gridSize, gridSize - 2, gridSize - 2);
            });
        }

        function drawGame() {
            ctx.fillStyle = '#7fbf00';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // move snake
            let head = { x: snake[0].x + dx, y: snake[0].y + dy };

            // edge behaviour[web:4]
            if (levelType === 'teleport') {
                if (head.x < 0) head.x = tileCount - 1;
                else if (head.x >= tileCount) head.x = 0;
                if (head.y < 0) head.y = tileCount - 1;
                else if (head.y >= tileCount) head.y = 0;
            } else {
                if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
                    gameOver();
                    return;
                }
            }

            snake.unshift(head);

            // food collision
            if (head.x === food.x && head.y === food.y) {
                score += 10;
                scoreElement.textContent = score;
                randomFood();
            } else {
                snake.pop();
            }

            // self collision (skip head index 0)[web:57][web:55]
            for (let i = 1; i < snake.length; i++) {
                if (snake[i].x === head.x && snake[i].y === head.y) {
                    gameOver();
                    return;
                }
            }

            // walls collision
            if (levelType === 'walls') {
                for (const w of wallsLayout) {
                    if (head.x === w.x && head.y === w.y) {
                        gameOver();
                        return;
                    }
                }
            }

            // draw snake
            ctx.fillStyle = '#305000';
            snake.forEach(seg => {
                ctx.fillRect(seg.x * gridSize, seg.y * gridSize, gridSize - 2, gridSize - 2);
            });
            ctx.fillStyle = '#d7ff5f';
            ctx.fillRect(head.x * gridSize, head.y * gridSize, gridSize - 2, gridSize - 2);

            // draw food
            ctx.fillStyle = '#000000';
            ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize - 2, gridSize - 2);

            drawWalls();
        }

        function loop() {
            if (!gameRunning) return;
            drawGame();
            gameLoopId = setTimeout(loop, gameSpeed);
        }

        function startGame() {
            const levelSelect = document.getElementById('levelSelect');
            const speedSelect = document.getElementById('speedSelect');
            levelType = levelSelect ? levelSelect.value : 'classic';

            // speed from difficulty dropdown[web:25]
            const speedChoice = speedSelect ? speedSelect.value : 'medium';
            if (speedChoice === 'easy') gameSpeed = 200;
            else if (speedChoice === 'medium') gameSpeed = 150;
            else if (speedChoice === 'impossible') gameSpeed = 60;

            // extra boost for "fast" level
            if (levelType === 'fast') {
                gameSpeed = Math.max(40, gameSpeed - 40);
            }

            document.getElementById('mainScreen').style.display = 'none';
            document.getElementById('gameContainer').style.display = 'block';

            snake = [{ x: 10, y: 10 }];
            dx = 1;
            dy = 0;
            score = 0;
            scoreElement.textContent = '0';
            randomFood();
            gameRunning = true;
            if (gameLoopId) clearTimeout(gameLoopId);
            loop();
            canvas.focus();
        }

        function gameOver() {
            gameRunning = false;
            if (gameLoopId) clearTimeout(gameLoopId);

            ctx.fillStyle = '#000000aa';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#d7ff5f';
            ctx.font = '28px Courier New';
            ctx.textAlign = 'center';
            ctx.fillText('GAME OVER', canvas.width / 2, canvas.height / 2 - 10);
            ctx.font = '18px Courier New';
            ctx.fillText('Final Score: ' + score, canvas.width / 2, canvas.height / 2 + 20);
            ctx.fillText('Press SPACE to restart', canvas.width / 2, canvas.height / 2 + 50);
        }

        document.addEventListener('keydown', (e) => {
            const LEFT = 37, UP = 38, RIGHT = 39, DOWN = 40, SPACE = 32;

            if (e.keyCode === SPACE && !gameRunning) {
                startGame();
                return;
            }
            if (!gameRunning) return;

            let key = e.keyCode;

            // reverse controls for that level[web:7]
            if (levelType === 'reverse') {
                if (key === LEFT) key = RIGHT;
                else if (key === RIGHT) key = LEFT;
                else if (key === UP) key = DOWN;
                else if (key === DOWN) key = UP;
            }

            if (key === LEFT && dx !== 1) { dx = -1; dy = 0; }
            if (key === UP && dy !== 1) { dx = 0; dy = -1; }
            if (key === RIGHT && dx !== -1) { dx = 1; dy = 0; }
            if (key === DOWN && dy !== -1) { dx = 0; dy = 1; }
        });

        function backToMenu() {
            gameRunning = false;
            if (gameLoopId) clearTimeout(gameLoopId);
            document.getElementById('gameContainer').style.display = 'none';
            document.getElementById('mainScreen').style.display = 'block';
        }

        canvas.tabIndex = 1;
    </script>
</body>

</html>